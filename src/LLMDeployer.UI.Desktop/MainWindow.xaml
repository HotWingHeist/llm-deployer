<?xml version="1.0" encoding="utf-8"?>
<Window x:Class="LLMDeployer.UI.Desktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="LLM Deployer - Chat" Height="700" Width="900"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <Grid Margin="20,20,20,0">
            <!-- Header -->
            <StackPanel Grid.Row="0" Margin="0,0,0,20">
                <TextBlock Text="ðŸ¤– LLM Deployer" FontSize="28" FontWeight="Bold" Foreground="#0078D4"/>
                <TextBlock x:Name="StatusText" Text="{Binding StatusText}" FontSize="14" Foreground="Gray" Margin="0,8,0,0"/>
            </StackPanel>
        </Grid>

        <!-- Chat Messages -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Background="White" BorderBrush="#DDD" BorderThickness="1" Margin="20,0,20,0">
            <ItemsControl ItemsSource="{Binding ChatMessages}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Margin="0,8,0,0" Padding="12,8" CornerRadius="8" Background="{Binding Background}"
                                HorizontalAlignment="{Binding Alignment}" MaxWidth="600">
                            <TextBlock Text="{Binding Content}" TextWrapping="Wrap" Foreground="Black"/>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <!-- Input Section -->
        <StackPanel Grid.Row="2" Margin="20,20,20,0">
            <Grid Height="50" Margin="0,0,0,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBox x:Name="InputTextBox" Grid.Column="0" 
                         Text="{Binding InputText, UpdateSourceTrigger=PropertyChanged}"
                         VerticalAlignment="Stretch" Padding="12,8"
                         Foreground="Black" Background="White"
                         BorderBrush="#DDD" BorderThickness="1"
                         TextWrapping="Wrap" AcceptsReturn="False"/>
                <Button Grid.Column="1" Content="Send" Margin="12,0,0,0" Padding="20,0" 
                        IsEnabled="{Binding IsSendEnabled}" Click="SendButton_Click"
                        Background="#0078D4" Foreground="White" FontWeight="Bold"/>
            </Grid>
            <Grid Height="40">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Button Grid.Column="1" Content="Clear History" Click="ClearButton_Click" Padding="15,0" Margin="0,0,8,0"/>
                <Button Grid.Column="2" Content="Exit" Click="ExitButton_Click" Padding="15,0"/>
            </Grid>
        </StackPanel>

        <!-- Status Bar -->
        <StatusBar Grid.Row="3" Background="#F0F0F0" BorderBrush="#DDD" BorderThickness="0,1,0,0">
            <StatusBarItem HorizontalAlignment="Left">
                <TextBlock Text="{Binding StatusText}" Foreground="Gray"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
